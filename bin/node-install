#!/bin/bash +x
#
# Node Install Script for Nemesis
# /srv/nemesis/bin/node-install
# (c) 2013 Sam Caldwell.  All Rights Reserved.
# 
[ "$(whoami)" != "root" ] && echo "This script must run as root" && exit 1

apt-get install binutils cpp cpp-4.7 dpkg-dev fakeroot g++ -y && \
apt-get install g++-4.7 gcc gcc-4.7 libppl-c4 -y && linux-libc-dev -y && \
apt-get install libc-dev-bin libc6-dev libcloog-ppl1 libgcc-4.7-dev -y && \
apt-get install libgmp10 libgmpxx4ldbl libgomp1 libitm1 libmpc2 libmpfr4 -y && \
apt-get install  libppl12 libquadmath0 libstdc++6-4.7-dev  make -y && \
cd /srv/nemesis/src/nodejs && \
make clean && \
./configure && \
make && \
make install && \
ln -sf /usr/local/bin/node /usr/bin/nodejs && \
echo "Node JS is installed." && \
/usr/local/bin/node -v && \
echo "done." && \
exit 0 

echo "Something went wrong."
exit 1